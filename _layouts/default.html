<!doctype html>
<html lang="{{site.active_lang}}">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="{{ '/assets/css/dist-style.css' | relative_url }}" rel="stylesheet" />
  <link href="{{ '/assets/css/fonts.css' | relative_url }}" rel="stylesheet" />

  <script src="https://cdn.jsdelivr.net/npm/motion@latest/dist/motion.js"></script>
  <script>
  const { animate, scroll } = Motion
</script>
</head>

<body class="bg-white text-gray-900 dark:bg-gray-700 dark:text-slate-100">
  {% include navbar.html %} {{ content }} {% include footer.html %}
  <script>
    document.querySelectorAll("a").forEach(function (link) {
      link.addEventListener("click", function (event) {
        event.preventDefault(); // Prevent the default link action temporarily
        link.classList.add("gentle-clicked");

        setTimeout(function () {
          link.classList.remove("gentle-clicked");
          window.location.href = link.href; // Navigate to the link after the animation
        }, 300); // Duration of the gentle bounce animation
      });
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize motion animations for all sections
      const motionElements = document.querySelectorAll('[data-motion]');
      
      motionElements.forEach(element => {
        const animationType = element.getAttribute('data-motion');
        
        // Handle stagger cards differently
        if (animationType === 'stagger-cards') {
          const cards = element.children;
          Array.from(cards).forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
          });
        } else {
          // Set initial state for regular animations
          element.style.opacity = '0';
          element.style.transform = getInitialTransform(animationType);
        }
        
        // Create intersection observer for scroll-triggered animations
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              animateElement(entry.target, animationType);
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });
        
        observer.observe(element);
      });
      
      function getInitialTransform(type) {
        switch(type) {
          case 'fadeInLeft':
            return 'translateX(-100px)';
          case 'fadeInRight':
            return 'translateX(100px)';
          case 'fadeInUp':
            return 'translateY(50px)';
          case 'fadeInDown':
            return 'translateY(-50px)';
          default:
            return 'translateY(0)';
        }
      }
      
      function animateElement(element, type) {
        // Get custom delay and duration from data attributes
        const customDelay = parseFloat(element.getAttribute('data-motion-delay')) || 0;
        const customDuration = parseFloat(element.getAttribute('data-motion-duration')) || (type === 'stagger-cards' ? 0.6 : 0.8);
        
        if (type === 'stagger-cards') {
          // Animate cards with stagger effect
          const cards = Array.from(element.children);
          cards.forEach((card, index) => {
            Motion.animate(card, 
              { 
                opacity: [0, 1],
                transform: ['translateY(30px)', 'translateY(0)']
              },
              { 
                duration: customDuration,
                delay: customDelay + (index * 0.1),
                easing: 'ease-out'
              }
            );
          });
        } else {
          // Regular animations with custom delay and duration
          Motion.animate(element, 
            { 
              opacity: [0, 1],
              transform: [getInitialTransform(type), 'translate(0, 0)']
            },
            { 
              duration: customDuration,
              delay: customDelay,
              easing: 'ease-out'
            }
          );
        }
      }
    });
  </script>
</body>

</html>
